#Heythere! Appserver



##Install
Steps to make the server running like a horse. Unix Mac Osx Guide.

1. __install node.js__ http://nodejs.org/download/

2. __install couchdb__

3. __install redis__

4. __install dependencies__
clone this repo, cd into the folder, type `$ npm install`

5. __configure__ modify the config/development.js

##Start

```bash
$ node app.js
```
##Models
Yolo.Model is basiclly a Backbone.Model extended with validation and a couchdb layer. Models go into `app/models` and are loaded automaticlly if Yolo boots. 
You define a model by extending the Yolo.Model:
```js
module.exports = Yolo.Model.extend({ 		
	//â€¦
});
```
###Scaffolding
Generate Models easily with the generator.js . This would generate a model named "post" with attributes title, content and author and title would be required field.

```bash
$ node generate.js model post title:required content author
```

Find out more options via 
```bash 
$ node generate.js
```
###Defaults
Define Defaults for each attribute you will add to the later. Defaults can be anything like Strings, Numbers or Objects. If the attribute wont be overwritten, the default value will be used instead. 
```js
defaults : {
	content : null,
	title : null
}
```
###Validation
You can define validation rules for each attribute. We save only valid models to database.
```js
validation : {
	firstName : { required : true },
	bio : { required: false, maxLength : 180 },
	email : { pattern: 'email' }
},
```
Full list of available validations:
https://github.com/thedersen/backbone.validation#required

###Views
Views are the couchdb way to query the database. Views consists of a **map** and a **reduce** function. However,
views for each attribute will be autogenerated while booting. For example if your model has a attribute
**firstName** we generate **Model.findByFirstName** for you. 
You can define additional views with the 'views' property which will be callable after booting:
```js
views : {
	myCustomView : {
		map : function(doc){
			// for eg emit(doc)
		},
		reduce : function(){
			
		}
	}
}
```
This view would then be callabble via **Model.myCustomView**. The views will be saved as design document to couchdb.
###Working with Models
####get
Use **Model.get(key)** to get attributes from a model:
```js
var user = new User();
user.get('firstName');
```
####set
Use **Model.set(key, value)** or **Model.set({ key1: value1})** to set attributes to the model:
```js
var user = new User();
user.set('firstName');
```

If you initialize a new model you can pass an object of keys and values which will be set, to the constructor:
```js
var user = new User({
	name : params.name,
	email : params.email
});
user.get('name');
```
####save
Save a model with **save(options)** to the database like so:
```js
var user = new User({
	name : params.name,
	email : params.email
});

user.save({
	success : function(){
		console.log("saved");
	},
	error : function(){
		console.log("save failed");
	}
});
```
__Note__ Only valid models will be saved to database. You should call **model.isValid()** before to check that.
####Model.isValid()
To check if a model is valid:
```js
if( ! model.isValid() ){
	console.log(model.validationError)
}
```
##Controllers
Controllers take the main part in handling incoming requests and processing them.
###Scaffolding
Generate Controllers easily with the generator.js . This would generate a controller namend "posts" with methods index, edit and delete. Method "edit" will be acessabble via 'POST' and "delete" via 'DELETE'. Routes to those methods will be added automatically.

```bash
$ node generate.js controller posts index edit:post delete:delete
```

Find out more options via 
```bash
$ node generate.js
```


A controller consists of a group of methods which handle one type of request defined in the **route**. Example:
```js
Yolo.Controller.extend({
	index : function(params){
		this.renderHTML("dashboard/index", {user : this.currentUser });
	}
});
```
The params object passed to each method contains every parameter that might be passed to the server. In the methods you have access to the following methods:
###this.renderHTML(path, options = {})
Renders and returns a Html Template at **path**. Everything into the options object will be available as variable in the template.

###this.renderJSON(options = {})
Returns a JSON Object containing the options.

###this.redirect(path)
Redirects the Request to **path**
###this.currentUser
If the user has a valid session eg he is logged in the **this.currentUser** will contain the current user object.


##Views
##Routes
